<div class="card mt-4">
    <div class="card-header">Pathadora</div>
    <div class="card-body">
        <div *ngIf="loading" class="spinner-border spinner-border-sm"></div>
        <div *ngIf="currentUser">
            <p>Benvenuto {{currentUser.user_username}}!</p>
        </div>
        <div *ngIf="currentUser && currentUser.user_role === 'user'">
            <form [formGroup]="learningPathForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label for="passion">Passione</label>
                    <input type="text" formControlName="passion" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.passion.errors }" />
                </div>
                <div class="form-group">
                    <label for="period">Durata del percorso di studi</label>
                    <input type="number" formControlName="period" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.period.errors }" />
                </div>
                <div class="form-group">
                    <label for="language">Lingua del percorso di studi</label>
                    <input type="text" formControlName="language" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.language.errors }" />
                </div>
                <div class="form-group form-check">
                    <input class="form-check-input" type="checkbox" formControlName="presence" [ngClass]="{ 'is-invalid': submitted && f.presence.errors }" />
                    <label class="form-check-label" for="presence">Presenza obbligatoria</label>
                </div>
                <div class="form-group">
                    <label for="max-courses">Massimo di numero di corsi da seguire per semestre</label>
                    <input type="number" formControlName="max-courses" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['max-courses'].errors }" />
                </div>
                <div class="form-group">
                    <p>Corsi da evitare</p>
                    <label formArrayName="courses-to-avoid" *ngFor="let course of coursesToAvoidFormArray.controls; let i = index">
                        <input type="checkbox" [formControlName]="i" [ngClass]="{ 'is-invalid': submitted && f['courses-to-avoid'].errors }">
                        {{coursesData[i].course_name}}
                      </label>
                </div>
                <div class="form-group">
                    <p>Corsi da includere</p>
                    <label formArrayName="courses-to-include" *ngFor="let course of coursesToIncludeFormArray.controls; let i = index">
                        <input type="checkbox" [formControlName]="i" [ngClass]="{ 'is-invalid': submitted && f['courses-to-include'].errors }">
                        {{coursesData[i].course_name}}
                      </label>
                </div>
                <div class="form-group container">
                    <p>Learning style</p>
                    <div class="row">
                        <div class="col-12 col-sm-6 col-md-3">
                            <div class="form-check">
                                <input type="radio" id="active" value="active" formControlName="active-reflective" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['active-reflective'].errors }" />
                                <label class="form-check-label" for="active">
                                    Active
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="reflective" value="reflective" formControlName="active-reflective" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['active-reflective'].errors }" />
                                <label class="form-check-label" for="reflective">
                                    Reflective
                                </label>
                            </div>
                        </div>
                        
                        <div class="col-12 col-sm-6 col-md-3">
                            <div class="form-check">
                                <input type="radio" id="sensing" value="sensing" formControlName="sensing-intuitive" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['sensing-intuitive'].errors }" />
                                <label class="form-check-label" for="sensing">
                                    Sensing
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="intuitive" value="intuitive" formControlName="sensing-intuitive" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['sensing-intuitive'].errors }" />
                                <label class="form-check-label" for="intuitive">
                                    Intuitive
                                </label>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-3">
                            <div class="form-check">
                                <input type="radio" id="visual" value="visual" formControlName="visual-veral" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['visual-veral'].errors }" />
                                <label class="form-check-label" for="visual">
                                    Visual
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="veral" value="veral" formControlName="visual-veral" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['visual-veral'].errors }" />
                                <label class="form-check-label" for="veral">
                                    Veral
                                </label>
                            </div>
                        </div>

                        <div class="col-12 col-sm-6 col-md-3">
                            <div class="form-check">
                                <input type="radio" id="sequential" value="sequential" formControlName="sequential-global" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['sequential-global'].errors }" />
                                <label class="form-check-label" for="sequential">
                                    Sequential
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="global" value="global" formControlName="sequential-global" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['sequential-global'].errors }" />
                                <label class="form-check-label" for="global">
                                    Global
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <p>Knowledge Background</p>
                    <div class="form-check">
                        <input type="radio" id="subjective" value="subjective" formControlName="knowledge-background" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['knowledge-background'].errors }" />
                        <label class="form-check-label" for="subjective">
                            Subjective
                        </label>
                    </div>
                    <div class="form-check">
                        <input type="radio" id="objective" value="objective" formControlName="knowledge-background" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['knowledge-background'].errors }" />
                        <label class="form-check-label" for="objective">
                            Objective
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <p>User Goal</p>
                    <div class="form-check">
                        <input type="radio" id="deadline-driven" value="deadline-driven" formControlName="user-goal" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['user-goal'].errors }" />
                        <label class="form-check-label" for="deadline-driven">
                            Deadline driven
                        </label>
                    </div>
                    <div class="form-check">
                        <input type="radio" id="score-driven" value="score-driven" formControlName="user-goal" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['user-goal'].errors }" />
                        <label class="form-check-label" for="score-driven">
                            Score driven
                        </label>
                    </div>
                    <div class="form-check">
                        <input type="radio" id="learning-awards" value="learning-awards" formControlName="user-goal" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['user-goal'].errors }" />
                        <label class="form-check-label" for="learning-awards">
                            Learning awards
                        </label>
                    </div>
                    <div class="form-check">
                        <input type="radio" id="shortest-path" value="shortest-path" formControlName="user-goal" class="form-check-input" [ngClass]="{ 'is-invalid': submitted && f['user-goal'].errors }" />
                        <label class="form-check-label" for="shortest-path">
                            Shortest path
                        </label>
                    </div>
                </div>
                <button [disabled]="loading" class="btn btn-primary">
                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                    Invia
                </button>
                <div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>
            </form>
        </div>
    </div>
</div>